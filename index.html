<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <title>Перенаправление...</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <script>
    // Берём первый приоритетный язык браузера
    const userLang = (navigator.languages && navigator.languages[0]) || 
                     navigator.language || 
                     navigator.userLanguage || 
                     'en';

    const lang = userLang.toLowerCase().slice(0,2); // ru, en, pl и т.д.

    let redirectTo = '/en/'; // дефолт — английский или любой другой

    if (lang === 'ru') {
      redirectTo = '/ru/';
    } else if (lang === 'pl') {
      redirectTo = '/pl/';
    }
    // можно добавить ещё языки

    // Сохраняем путь + query + hash (важно!)
    const target = redirectTo + 
                   window.location.pathname.slice(1) + 
                   window.location.search + 
                   window.location.hash;

    // Редиректим без истории (лучше для UX)
    window.location.replace(target);
  </script>
</head>
<body>
  <p>Перенаправляем... 
    <a href="/ru/">Русская версия</a> | 
    <a href="/en/">English</a> | 
    <a href="/pl/">Polski</a>
  </p>
  <noscript>
    <meta http-equiv="refresh" content="0; url=/en/">
    <p>Включи JavaScript или перейди вручную: 
      <a href="/ru/">RU</a> / <a href="/en/">EN</a> / <a href="/pl/">PL</a>
    </p>
  </noscript>
</body>
</html>
